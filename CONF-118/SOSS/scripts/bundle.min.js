function playAnimation(){animationGroup.isPlaying||($("#playAnimation").css("background","#DFDFDF"),isOpen?animationGroup.start(!1,-1,4,0):animationGroup.start(!1,1,0,4),isOpen=!isOpen)}function woodBlockState(){for(meshes=1;hinge.meshes.length>meshes;meshes++)hinge.meshes[meshes].name.includes("Background")||(hinge.meshes[meshes].name.includes("Wood")&&(hinge.meshes[meshes].visibility=!hinge.meshes[meshes].visibility),hinge.meshes[meshes].material.ambientTexture=null),$("#woodState").text(`${isWoodBlock?"Show":"Hide"} Wood Blocks`),$("#woodImage").attr("src",`./assets/layout/${isWoodBlock?"show":"hide"}.png`);isWoodBlock=!isWoodBlock;isWoodBlock&&isOpen&&(scene.activeCamera.spinTo("alpha",Math.PI*1.1,60),scene.activeCamera.spinTo("beta",7.5*Math.PI/16,60),scene.activeCamera.spinTo("radius",4,60))}function materialChange(n){if(n!=hingeMaterial){for($(`#${n}`).detach().prependTo("#materialChange"),$(`#${n}`).css("display","inline-block"),meshes=1;hinge.meshes.length>meshes;meshes++)hinge.meshes[meshes].name.includes("Wood")||hinge.meshes[meshes].name.includes("Background")||(hinge.meshes[meshes].material.albedoTexture=new BABYLON.Texture(`./assets/materials/baseColors/${n}.png`,scene),hinge.meshes[meshes].material.albedoColor=new BABYLON.Color3(1,1,1));hingeMaterial=n}switch(n){case"chrome":document.title="SOSS - 518US26D";break;case"brass":document.title="SOSS - 518US4";break;case"black":document.title="SOSS - 518US19";break;case"nickel":document.title="SOSS - 518US15"}}var data={Code:"soss",Description:"Invinsible Hinge",ModelPath:"/assets/models/",Model:"low-hinge.glb",Skybox:"./assets/env/CathedralEnvHDR.dds",Background:"assets/environment/background.jpg"},canvas=document.getElementById("builderCanvas"),engine=new BABYLON.Engine(canvas,!0,{premultipliedAlpha:!1,preserveDrawingBuffer:!0,stencil:!0}),scene=new BABYLON.Scene(engine),hinge,animationGroup,skyboxPath=data.Skybox,isOpen=!0,isWoodBlock=!0,hingeMaterial="Chrome",root,createScene;window.location.hostname!="localhost"?(root=window.location.href.replace("index.html",""),root.includes("#")&&(root=root.replace("#",""))):root=window.location.origin;scene.clearColor=new BABYLON.Color3(1,1,1);BABYLON.ArcRotateCamera.prototype.spinTo=function(n,t,i){var r=new BABYLON.CubicEase;r.setEasingMode(BABYLON.EasingFunction.EASINGMODE_EASEINOUT);BABYLON.Animation.CreateAndStartAnimation("at4",this,n,i,120,this[n],t,0,r)};createScene=function(){var i=root+data.ModelPath,r=data.Model,n=new BABYLON.ArcRotateCamera("Camera",Math.PI*1.1,7.5*Math.PI/16,4,new BABYLON.Vector3(0,0,0),scene),t;return n.attachControl(canvas,!1),n.lowerRadiusLimit=2.3,n.upperRadiusLimit=6,n.panningSensibility=1e3,n.wheelPrecision=100,t=new BABYLON.HemisphericLight("omni",new BABYLON.Vector3(0,2,0),scene),t.intensity=0,BABYLON.SceneLoader.ShowLoadingScreen=!1,BABYLON.SceneLoader.Append(i,r,scene,onSuccess=function(n){var i,t,r;for(hinge=n,i=new BABYLON.Texture("",scene),n=1;hinge.meshes.length>n;n++)hinge.meshes[n].actionManager=new BABYLON.ActionManager(scene),hinge.meshes[n].actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,function(){},!1)),i<<new BABYLON.Texture(`./assets/materials/aoOpen/${hinge.meshes[n].name}_Mixed_AO.png`,scene),hinge.meshes[n].name.includes("Wood")?(hinge.meshes[n].material.roughness=2,hinge.meshes[n].material.metallic=0):(hinge.meshes[n].material.roughness=.5,hinge.meshes[n].material.metallic=.9);hinge.animationsEnabled=!0;animationGroup=hinge.animationGroups[0];animationGroup.loopAnimation=!1;isOpen=!0;t=1;animationGroup.onAnimationGroupPlayObservable.add(function(){t=0});animationGroup.onAnimationEndObservable.add(function(){if(isWoodBlock)while(t<1){for(n=1;hinge.meshes.length>n;n++)hinge.meshes[n].name.includes("Background")||(hinge.meshes[n].material.ambientTexture=new BABYLON.Texture(`./assets/materials/aoOpen/${hinge.meshes[n].name}_Mixed_AO.png`,scene),hinge.meshes[n].material.ambientTexture.vAng=-Math.PI,hinge.meshes[n].material.ambientTexture.wAng=-Math.PI);t++}$("#playAnimation").css("background"," #CD3327")});r=new BABYLON.CubeTexture.CreateFromPrefilteredData(skyboxPath,scene);scene.environmentTexture=r;$("#loadingScreen").fadeOut(4e3)},onProgress=function(n){if(n.lengthComputable){var t=(n.loaded*100/n.total).toFixed();console.log("Loading, please wait..."+t+"%");$("#loadingText").text("Loading, please wait..."+t+"%");$("#loadingBar").css("width",`${t}%`);t>=100}else dlCount=n.loaded/1048576,console.log("Loading, please wait..."+Math.floor(dlCount*100)/100+" MB already loaded.")}),window.addEventListener("resize",function(){engine.resize()}),scene};scene=createScene();engine.runRenderLoop(function(){window.addEventListener("resize",function(){engine.resize()});scene.render()});